{% extends 'base.html.twig' %}

{% block title %}{{ comercio.nombre }}{% endblock %}
{# TODO: detalle del comercio que ve el usario #}
{% block body %}
    <div class="mt-5"></div>
    <!-- Section: Split screen -->
    <section class="">

        <div class="container-fluid px-0">
            <div class="row g-0">
                <!-- First column -->
                <div class="col-lg-6 vh-100 d-flex flex-column justify-content-center align-items-center">

                    <!--Header-->
                    <div class="">
                        <h1 class="display-2 fw-bold text-uppercase">{{ comercio.nombre }}</h1>
                        <h2 class="display-4">Tienda de frikismo</h2>
                    </div>

                    <!--Info-->
                    <div class="" style="margin-top: 8%; text-align: center">
                        <p class="display-10">{{ comercio.estado }}</p>
                        <p class="display-10">{{ comercio.email }}</p>
                        <p class="display-10">{{ comercio.telefono }}</p>
                        <p class="display-10">{{ comercio.descripcion }}</p>
                        <p class="display-10">{{ comercio.direccion }}</p>
                    </div>

                    <!-- First column -->
                </div>

                <!-- Second column -->
                {% for foto in comercio.fotos %}
                    <div class="comercio col-lg-6 vh-100 d-flex justify-content-center align-items-center">
                        <img class="d-block vh-100 shadow-3-strong"
                             src="{{ asset('storage/' ~ comercio.id ~ '/' ~ foto.archivo) }}" alt="Foto comercio"
                             style="border-bottom-left-radius: 4rem; width: 60rem;">
                    </div>
                {% endfor %}

                <!-- Second column -->
            </div>
        </div>
    </section>
    <section>

        <section>
            <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCXfC6YS6x486gAff9-InexBfZaerhr9p4"></script>
            <div id="map" style="width: 100%; height: 400px;"></div>
        </section>

        <script>
            // Función para inicializar el mapa
            function initMap() {
                var direccion = "{{ comercio.direccion }}";

                var geocoder = new google.maps.Geocoder();

                geocoder.geocode({ 'address': direccion }, function (results, status) {
                    if (status === 'OK') {
                        var mapOptions = {
                            center: results[0].geometry.location,
                            zoom: 15
                        };

                        var map = new google.maps.Map(document.getElementById('map'), mapOptions);

                        var marker = new google.maps.Marker({
                            map: map,
                            position: results[0].geometry.location,
                            title: 'Ubicación del Comercio'
                        });
                    } else {
                        alert('Geocodificación fallida debido a: ' + status);
                    }
                });
            }
        </script>

        <script async defer
                src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCXfC6YS6x486gAff9-InexBfZaerhr9p4&callback=initMap">
        </script>
    </section>
{% endblock %}
{% block js %}

{% endblock %}
